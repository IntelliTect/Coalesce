import{_ as o,c as a,I as e,a7 as s,D as l,o as t}from"./chunks/framework.BkavzUpE.js";const _=JSON.parse('{"title":"[ControllerAction]","description":"","frontmatter":{"deprecated":true},"headers":[],"relativePath":"modeling/model-components/attributes/controller-action.md","filePath":"modeling/model-components/attributes/controller-action.md"}'),p={name:"modeling/model-components/attributes/controller-action.md"},r=s(`<h1 id="controlleraction" tabindex="-1">[ControllerAction] <a class="header-anchor" href="#controlleraction" aria-label="Permalink to &quot;[ControllerAction]&quot;">​</a></h1><p><code>IntelliTect.Coalesce.DataAnnotations.ControllerActionAttribute</code></p><p>Specifies how a <a href="/Coalesce/modeling/model-components/methods.html">custom method</a> is exposed via HTTP. Can be used to customize the HTTP method/verb for the method, as well as caching behavior.</p><h2 id="example-usage" tabindex="-1">Example Usage <a class="header-anchor" href="#example-usage" aria-label="Permalink to &quot;Example Usage&quot;">​</a></h2><div class="language-c#"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Person</span></span>
<span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> int</span><span style="color:#9CDCFE;"> PersonId</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> LastName</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> PictureHash</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Coalesce</span><span style="color:#D4D4D4;">]</span></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">ControllerAction</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Method</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">HttpMethod</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">Get</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> static</span><span style="color:#569CD6;"> long</span><span style="color:#DCDCAA;"> PersonCount</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">AppDbContext</span><span style="color:#9CDCFE;"> db</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">string</span><span style="color:#9CDCFE;"> lastNameStartsWith</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#C586C0;">        return</span><span style="color:#9CDCFE;"> db</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">People</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Count</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">f</span><span style="color:#D4D4D4;"> =&gt; </span><span style="color:#9CDCFE;">f</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">LastName</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">StartsWith</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">lastNameStartsWith</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Coalesce</span><span style="color:#D4D4D4;">]</span></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">ControllerAction</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">HttpMethod</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">Get</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">VaryByProperty</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">nameof</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">PictureHash</span><span style="color:#D4D4D4;">))]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> IFile</span><span style="color:#DCDCAA;"> GetPicture</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">AppDbContext</span><span style="color:#9CDCFE;"> db</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#C586C0;">        return</span><span style="color:#569CD6;"> new</span><span style="color:#4EC9B0;"> IntelliTect</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Coalesce</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Models</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">File</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">db</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">PersonPictures</span></span>
<span class="line"><span style="color:#D4D4D4;">            .</span><span style="color:#DCDCAA;">Where</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> =&gt; </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">PersonId</span><span style="color:#D4D4D4;"> == </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">PersonId</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">            .</span><span style="color:#DCDCAA;">Select</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> =&gt; </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">Content</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">        )</span></span>
<span class="line"><span style="color:#D4D4D4;">        {</span></span>
<span class="line"><span style="color:#9CDCFE;">            ContentType</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;image/jpg&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">        };</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><h2 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" aria-label="Permalink to &quot;Properties&quot;">​</a></h2>`,6),c=s("<p>The HTTP method to use on the generated API Controller.</p><p>Enum values are:</p><ul><li><code>HttpMethod.Post</code> Use the POST method.</li><li><code>HttpMethod.Get</code> Use the GET method.</li><li><code>HttpMethod.Put</code> Use the PUT method.</li><li><code>HttpMethod.Delete</code> Use the DELETE method.</li><li><code>HttpMethod.Patch</code> Use the PATCH method.</li></ul>",3),D=s('<p>For HTTP GET model instance methods, if <code>VaryByProperty</code> is set to the name of a property on the parent model class, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag" target="_blank" rel="noreferrer">ETag headers</a> based on the value of this property will be used to implement caching. If the client provides a matching <code>If-None-Match</code> Header with the request, the method will not be invoked and HTTP Status `304 Not Modified`` will be returned.</p><p>Additionally, if the <code>VaryByProperty</code> is set to a client-exposed <a href="/Coalesce/modeling/model-components/properties.html">property</a>, the value of the property will be included in the query string when performing API calls to invoke the method. If the query string value matches the current value on the model, a long-term <code>Cache-Control</code> header will be set on the response, allowing the client to avoid making future invocations to the same method while the value of the <code>VaryByProperty</code> remains the same.</p>',2);function i(y,C,d,h,m,u){const n=l("Prop");return t(),a("div",null,[r,e(n,{def:"public HttpMethod Method { get; set; } = HttpMethod.Post;",ctor:"1"}),c,e(n,{def:"public string VaryByProperty { get; set; }"}),D])}const P=o(p,[["render",i]]);export{_ as __pageData,P as default};
