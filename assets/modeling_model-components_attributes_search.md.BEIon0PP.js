import{_ as n,c as l,I as s,a7 as o,l as e,a as t,D as r,o as i}from"./chunks/framework.BkavzUpE.js";const _=JSON.parse('{"title":"[Search]","description":"","frontmatter":{},"headers":[],"relativePath":"modeling/model-components/attributes/search.md","filePath":"modeling/model-components/attributes/search.md"}'),c={name:"modeling/model-components/attributes/search.md"},p=o(`<h1 id="search" tabindex="-1">[Search] <a class="header-anchor" href="#search" aria-label="Permalink to &quot;[Search]&quot;">​</a></h1><p><code>IntelliTect.Coalesce.DataAnnotations.SearchAttribute</code></p><p>Coalesce supports searching through the generated API in its various implementations, including the <a href="/Coalesce/stacks/vue/coalesce-vue-vuetify/components/c-admin-table-page.html">admin pages</a> and through the <a href="/Coalesce/stacks/vue/layers/viewmodels.html#listviewmodels">ListViewModels</a>&#39;s <code>$params.search</code> properly.</p><p>The <code>search</code> parameter of the API can also be formatted as <code>PropertyName:SearchTerm</code> in order to search on an arbitrary property of a model. For example, a value of <code>Nickname:Steve-o</code> for a search term would search the <code>Nickname</code> property, even through it is not marked as searchable using this attribute.</p><p>By default, the system will search any field with the name &#39;Name&#39;. If this doesn&#39;t exist, the ID is used as the only searchable field. Once you place the <code>Search</code> attribute on one or more properties on a model, only those annotated properties will be searched.</p><p>Searching will not search on properties that are hidden from the user by <a href="./security-attribute.html">Security Attributes</a>.</p><h2 id="searchable-property-types" tabindex="-1">Searchable Property Types <a class="header-anchor" href="#searchable-property-types" aria-label="Permalink to &quot;Searchable Property Types&quot;">​</a></h2><h4 id="strings" tabindex="-1">Strings <a class="header-anchor" href="#strings" aria-label="Permalink to &quot;Strings&quot;">​</a></h4><p>String fields will be searched based on the <code>SearchMethod</code> property on the attribute. See below.</p><h4 id="numeric-types" tabindex="-1">Numeric Types <a class="header-anchor" href="#numeric-types" aria-label="Permalink to &quot;Numeric Types&quot;">​</a></h4><p>If the input is numeric, numeric fields will be searched for the exact value.</p><h4 id="enums" tabindex="-1">Enums <a class="header-anchor" href="#enums" aria-label="Permalink to &quot;Enums&quot;">​</a></h4><p>If the input is a valid name of an enum value for an enum property and that property is searchable, rows will be searched for the exact value.</p><h4 id="dates" tabindex="-1">Dates <a class="header-anchor" href="#dates" aria-label="Permalink to &quot;Dates&quot;">​</a></h4><p>If the input is a parsable date, rows will be searched based on that date.</p><p>Date search will do its best to guess at the user&#39;s intentions:</p><ul><li>Various forms of year/month combos are supported, and if only a year/month is inputted, it will look for all dates in that month, e.g. &quot;Feb 2017&quot; or &quot;2016-11&quot;.</li><li>A date without a time (or a time of exactly midnight) will search the entire day, e.g. &quot;2017/4/18&quot;.</li><li>A date/time with minutes and seconds equal to 0 will search the entire hour, e.g. &quot;April 7, 2017 11 AM&quot;.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>When searching on date properties, you should almost always set <code>IsSplitOnSpaces = false</code> on the <code>Search</code> attribute. This allows natural inputs like &quot;July 21, 2017&quot; to search correctly. Otherwise, only non-whitespace date formats will work, like &quot;2017/21/07&quot;.</p></div><h4 id="reference-navigation-properties" tabindex="-1">Reference Navigation Properties <a class="header-anchor" href="#reference-navigation-properties" aria-label="Permalink to &quot;Reference Navigation Properties&quot;">​</a></h4><p>When a reference navigation property is marked with <code>[Search]</code>, searchable properties on the referenced object will also be searched. This behavior will go up to two levels away from the root object, and can be controlled with the <code>RootWhitelist</code> and <code>RootBlacklist</code> properties on the <code>[Search]</code> attribute that are outlined below.</p><h4 id="collection-navigation-properties" tabindex="-1">Collection Navigation Properties <a class="header-anchor" href="#collection-navigation-properties" aria-label="Permalink to &quot;Collection Navigation Properties&quot;">​</a></h4><p>When a collection navigation property is marked with <code>[Search]</code>, searchable properties on the child objects will also be searched. This behavior will go up to two levels away from the root object, and can be controlled with the <code>RootWhitelist</code> and <code>RootBlacklist</code> properties on the <code>[Search]</code> attribute that are outlined below.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Searches on collection navigation properties usually don&#39;t translate well with EF Core, leading to potentially degraded performance. Use this feature cautiously.</p></div><h2 id="example-usage" tabindex="-1">Example Usage <a class="header-anchor" href="#example-usage" aria-label="Permalink to &quot;Example Usage&quot;">​</a></h2><div class="language-c#"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Person</span></span>
<span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> int</span><span style="color:#9CDCFE;"> PersonId</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Search</span><span style="color:#D4D4D4;">]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> FirstName</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Search</span><span style="color:#D4D4D4;">]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> LastName</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Search</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">IsSplitOnSpaces</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> BirthDate</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> Nickname</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Search</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">RootWhitelist</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">nameof</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Person</span><span style="color:#D4D4D4;">))]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> ICollection</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Address</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">Addresses</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><h2 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" aria-label="Permalink to &quot;Properties&quot;">​</a></h2>`,26),h=e("p",null,[t("If set to true (the default), each word in the search terms will be searched for in each searchable field independently, and a row will only be considered a match if each word in the search term is a match on at least one searchable property where "),e("code",null,"IsSplitOnSpaces == true")],-1),d=e("p",null,[t("This is useful when searching for a full name across two or more fields. In the above example, using "),e("code",null,"IsSplitOnSpaces = true"),t(" would provide more intuitive behavior since it will search both first name and last name for each word entered into the search field. But, "),e("a",{href:"https://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/",target:"_blank",rel:"noreferrer"},"you probably shouldn't be doing that"),t(".")],-1),u=o("<p>For string properties, specifies how the value in the property/column will be matched.</p><ul><li><code>BeginsWith</code>: Search term will be checked for at the beginning of the field&#39;s value in a case insensitive manner.</li><li><code>Equals</code>: Search term must match the field exactly in a case insensitive manner.</li><li><code>EqualsNatural</code>: Search term must match exactly, using the natural casing handling of the evaluation environment. Default database collation will be used if evaluated in SQL, and exact casing will be used if evaluated in memory. This allows index seeks to be used instead of index scans, providing extra high performance searches against indexed columns</li><li><code>Contains</code>: Search term will be checked for anywhere inside the field&#39;s value in a case insensitive manner. <strong>Will be slow against large databases - performance cannot be improved with database indexing.</strong></li></ul>",2),D=e("p",null,"A comma-delimited list of model class names that, if set, will prevent the targeted property from being searched unless the root object of the API call was one of the specified class names.",-1),m=e("p",null,"A comma-delimited list of model class names that, if set, will prevent the targeted property from being searched if the root object of the API call was one of the specified class names.",-1);function y(b,f,g,w,C,v){const a=r("Prop");return i(),l("div",null,[p,s(a,{def:"public bool IsSplitOnSpaces { get; set; } = true;"}),h,d,s(a,{def:"public SearchMethods SearchMethod { get; set; } = SearchMethods.BeginsWith;"}),u,s(a,{def:"public string RootWhitelist { get; set; } = null;"}),D,s(a,{def:"public string RootBlacklist { get; set; } = null;"}),m])}const k=n(c,[["render",y]]);export{_ as __pageData,k as default};
