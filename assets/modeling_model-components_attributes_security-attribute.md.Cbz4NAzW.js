import{_ as t,c as n,I as s,a,a7 as o,l,D as p,o as r}from"./chunks/framework.BkavzUpE.js";const E=JSON.parse('{"title":"Security Attributes","description":"","frontmatter":{},"headers":[],"relativePath":"modeling/model-components/attributes/security-attribute.md","filePath":"modeling/model-components/attributes/security-attribute.md"}'),c={name:"modeling/model-components/attributes/security-attribute.md"},i=o(`<h1 id="security-attributes" tabindex="-1">Security Attributes <a class="header-anchor" href="#security-attributes" aria-label="Permalink to &quot;Security Attributes&quot;">​</a></h1><p>Coalesce provides a collection of attributes which can provide class-level (and property-level, where appropriate) security controls over the generated API.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This page provides API-level documentation for a specific set of attributes. For a complete overview of all the security-focused techniques that can be used in a Coalesce application, see the <a href="/Coalesce/topics/security.html">Security</a> page.</p></div><h2 id="class-vs-property-security" tabindex="-1">Class vs. Property Security <a class="header-anchor" href="#class-vs-property-security" aria-label="Permalink to &quot;Class vs. Property Security&quot;">​</a></h2><p>There are important differences between class-level security and property-level security, beyond the usage of the attributes themselves:</p><ul><li>Class-level security is enforced in the generated API Controllers, primarily as <code>[Authorize]</code> attributes on the generated actions.</li><li>Property security is enforced in the <a href="/Coalesce/stacks/agnostic/dtos.html">Generated C# DTOs</a>.</li></ul><p>This means that class-level security only affects calls made to that type&#39;s standard API endpoints (and any type&#39;s bulk save endpoint), but does not affect usages of that type on other types&#39; navigation properties. For details on how to control navigation properties, see the <a href="/Coalesce/topics/security.html">Security page section on Entity Reads</a></p><h2 id="implementations" tabindex="-1">Implementations <a class="header-anchor" href="#implementations" aria-label="Permalink to &quot;Implementations&quot;">​</a></h2><h3 id="read" tabindex="-1">[Read] <a class="header-anchor" href="#read" aria-label="Permalink to &quot;[Read]&quot;">​</a></h3><p><code>IntelliTect.Coalesce.DataAnnotations.ReadAttribute</code></p><p>For <strong>class-level</strong> security, controls access to the type&#39;s generated <code>/get</code>, <code>/list</code>, and <code>/count</code> endpoints, as well as stacking with <code>[Edit]</code>/<code>[Save]</code> to control the <code>/bulkSave</code> endpoint.</p><p>For <strong>property-level</strong> security, controls reading of that property any time it would be returned by any Coalesce built-in or custom endpoint. If a <code>[Read]</code> attribute is present without an <code>[Edit]</code> attribute, the property is read-only.</p><p>Additionally, you can set <code>NoAutoInclude = true</code> on the <code>[Read]</code> attribute to suppress the <a href="/Coalesce/modeling/model-components/data-sources.html#default-loading-behavior">Default Loading Behavior</a>. When targeted at a class, prevents all navigation properties of that class&#39; type from being auto-included. When targeted at a navigation property, only that specific navigation property is affected.</p><h4 id="example-usage" tabindex="-1">Example Usage <a class="header-anchor" href="#example-usage" aria-label="Permalink to &quot;Example Usage&quot;">​</a></h4><div class="language-c#"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">[</span><span style="color:#4EC9B0;">Read</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Roles</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;Management&quot;</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Employee</span></span>
<span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> int</span><span style="color:#9CDCFE;"> EmployeeId</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Read</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Payroll&quot;</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> LastFourSsn</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Read</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Payroll&quot;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">NoAutoInclude</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> List</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Paycheck</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">Paychecks</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">    ...</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><h3 id="edit" tabindex="-1">[Edit] <a class="header-anchor" href="#edit" aria-label="Permalink to &quot;[Edit]&quot;">​</a></h3><p><code>IntelliTect.Coalesce.DataAnnotations.EditAttribute</code></p><p>For <strong>class-level</strong> security, controls saving of existing instances of the type through the generated <code>/save</code> and <code>/bulkSave</code> endpoints.</p><p>For <strong>property-level</strong> security, controls access to the property any time it accepted as input by any Coalesce built-in or custom endpoint. If a <code>[Read]</code> attribute is present, one of its roles must be fulfilled in addition to the roles specified (if any) for the <code>[Edit]</code> attribute.</p><h4 id="example-usage-1" tabindex="-1">Example Usage <a class="header-anchor" href="#example-usage-1" aria-label="Permalink to &quot;Example Usage&quot;">​</a></h4><div class="language-c#"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">[</span><span style="color:#4EC9B0;">Edit</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Roles</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;Management,Payroll&quot;</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Employee</span></span>
<span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> int</span><span style="color:#9CDCFE;"> EmployeeId</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#4EC9B0;">Read</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Payroll,HumanResources&quot;</span><span style="color:#D4D4D4;">), </span><span style="color:#4EC9B0;">Edit</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Payroll&quot;</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> LastFourSsn</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    ...</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">[</span><span style="color:#4EC9B0;">Edit</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">PermissionLevel</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">SecurityPermissionLevels</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">DenyAll</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Paycheck</span><span style="color:#D4D4D4;"> { ... }</span></span></code></pre></div><h3 id="create" tabindex="-1">[Create] <a class="header-anchor" href="#create" aria-label="Permalink to &quot;[Create]&quot;">​</a></h3><p><code>IntelliTect.Coalesce.DataAnnotations.CreateAttribute</code></p><p>For <strong>class-level</strong> security, controls saving of new instances of the type through the generated <code>/save</code> and <code>/bulkSave</code> endpoints.</p><p>Not applicable to properties.</p><h4 id="example-usage-2" tabindex="-1">Example Usage <a class="header-anchor" href="#example-usage-2" aria-label="Permalink to &quot;Example Usage&quot;">​</a></h4><div class="language-c#"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">[</span><span style="color:#4EC9B0;">Create</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Roles</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;HumanResources&quot;</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Employee</span><span style="color:#D4D4D4;"> { ... }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">[</span><span style="color:#4EC9B0;">Create</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">PermissionLevel</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">SecurityPermissionLevels</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">DenyAll</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Paycheck</span><span style="color:#D4D4D4;"> { ... }</span></span></code></pre></div><h3 id="delete" tabindex="-1">[Delete] <a class="header-anchor" href="#delete" aria-label="Permalink to &quot;[Delete]&quot;">​</a></h3><p><code>IntelliTect.Coalesce.DataAnnotations.DeleteAttribute</code></p><p>For <strong>class-level</strong> security, controls deleting of existing instances of the type through the generated <code>/delete</code> and <code>/bulkSave</code> endpoints.</p><p>Not applicable to properties.</p><h4 id="example-usage-3" tabindex="-1">Example Usage <a class="header-anchor" href="#example-usage-3" aria-label="Permalink to &quot;Example Usage&quot;">​</a></h4><div class="language-c#"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">[</span><span style="color:#4EC9B0;">Delete</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;HumanResources&quot;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&quot;Management&quot;</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Employee</span><span style="color:#D4D4D4;"> { ... }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">[</span><span style="color:#4EC9B0;">Delete</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">PermissionLevel</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">SecurityPermissionLevels</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">DenyAll</span><span style="color:#D4D4D4;">)]</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Paycheck</span><span style="color:#D4D4D4;"> { ... }</span></span></code></pre></div><h3 id="execute" tabindex="-1">[Execute] <a class="header-anchor" href="#execute" aria-label="Permalink to &quot;[Execute]&quot;">​</a></h3><p>A separate attribute for controlling <a href="/Coalesce/modeling/model-components/methods.html">custom method</a> execution exists. Its documentation may be found on the <a href="/Coalesce/modeling/model-components/attributes/execute.html">ExecuteAttribute</a> page.</p><h3 id="restrict" tabindex="-1">[Restrict] <a class="header-anchor" href="#restrict" aria-label="Permalink to &quot;[Restrict]&quot;">​</a></h3><p>For property security, <a href="#read"><code>[Read]</code></a> and <a href="#edit"><code>[Edit]</code></a> can be used to apply role-based security. If you need logic more complicated than checking for the presence of a role, <a href="/Coalesce/modeling/model-components/attributes/restrict.html">RestrictAttribute</a> offers the ability to write custom code to control the read and write permissions of a property.</p><h2 id="attribute-properties" tabindex="-1">Attribute Properties <a class="header-anchor" href="#attribute-properties" aria-label="Permalink to &quot;Attribute Properties&quot;">​</a></h2>`,38),D=l("p",null,"A comma-delimited list of roles that are authorized to take perform the action represented by the attribute. If the current user belongs to any of the listed roles, the action will be allowed.",-1),d=o("<p>The level of access to allow for the action for <strong>class-level security</strong> only. Has no effect for property-level security.</p><p>Enum values are:</p><ul><li><code>SecurityPermissionLevels.AllowAll</code> Allow all users to perform the action for the attribute, including users who are not authenticated at all.</li><li><code>SecurityPermissionLevels.AllowAuthorized</code> <strong>Default</strong>. Allow only users who are members of the roles specified on the attribute to perform the action. If no roles are specified on the attribute, then all authenticated users are allowed (no anonymous access).</li><li><code>SecurityPermissionLevels.DenyAll</code> Deny the action to all users, regardless of authentication status or authorization level. If <code>DenyAll</code> is used on a class, no API endpoint for the governed actions will be generated.</li></ul>",3);function y(u,h,C,m,b,g){const e=p("Prop");return r(),n("div",null,[i,s(e,{def:"public string Roles { get; set; }",ctor:"1"}),a(),D,s(e,{def:"public SecurityPermissionLevels PermissionLevel { get; set; }",ctor:"1"}),a(),d])}const v=t(c,[["render",y]]);export{E as __pageData,v as default};
