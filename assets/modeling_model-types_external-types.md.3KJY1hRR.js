import{_ as s,c as a,o as n,a7 as l}from"./chunks/framework.BkavzUpE.js";const u=JSON.parse('{"title":"External Types","description":"","frontmatter":{},"headers":[],"relativePath":"modeling/model-types/external-types.md","filePath":"modeling/model-types/external-types.md"}'),e={name:"modeling/model-types/external-types.md"},o=l(`<h1 id="external-types" tabindex="-1">External Types <a class="header-anchor" href="#external-types" aria-label="Permalink to &quot;External Types&quot;">​</a></h1><p>In Coalesce, any data class exposed by Coalesce that isn&#39;t a <a href="/Coalesce/modeling/model-types/crud.html">CRUD Model</a> is considered to be an &quot;external type&quot;.</p><p>The collection of external types for a data model looks like this:</p><ol><li>Take all of the exposed property types, method parameters, and method return types of your <a href="/Coalesce/modeling/model-types/crud.html">CRUD Models</a>, as well as method parameters and returns from <a href="/Coalesce/modeling/model-types/services.html">Services</a>.</li><li>Any of these types which are not built-in scalar types and not one of the aforementioned CRUD models are external types.</li><li>For any external type discovered, any of the property types which qualify under the above rules are also external types.</li></ol><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Be careful when using types that you do not own for properties and method returns in your data model. When Coalesce generates external type ViewModels and DTOs, it will not stop until it has exhausted all paths that can be reached by following public property types and method returns.</p><p>In general, you should only expose types that you have created so that you will always have full control over them. Mark any properties you don&#39;t wish to expose with <a href="/Coalesce/modeling/model-components/attributes/internal-use.html">[InternalUse]</a>, or make those members non-public.</p></div><h2 id="generated-code" tabindex="-1">Generated Code <a class="header-anchor" href="#generated-code" aria-label="Permalink to &quot;Generated Code&quot;">​</a></h2><p>For each external type found in your application&#39;s model, Coalesce will generate:</p><ul><li>A <a href="/Coalesce/stacks/agnostic/dtos.html">Generated DTO</a></li><li>A <a href="/Coalesce/stacks/vue/layers/models.html">TypeScript Model</a></li></ul><h2 id="example-data-model" tabindex="-1">Example Data Model <a class="header-anchor" href="#example-data-model" aria-label="Permalink to &quot;Example Data Model&quot;">​</a></h2><p>For example, in the following scenario, the following classes are considered as external types:</p><ul><li><code>PluginMetadata</code>, exposed through a getter-only property on <code>ApplicationPlugin</code>.</li><li><code>PluginResult</code>, exposed through a method return on <code>ApplicationPlugin</code>.</li></ul><p><code>PluginHandler</code> is not because it not exposed by the model, neither directly nor through any of the other external types.</p><div class="language-c#"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> AppDbContext</span><span style="color:#D4D4D4;"> : </span><span style="color:#4EC9B0;">DbContext</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> DbSet</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Application</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">Applications</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> DbSet</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">ApplicationPlugin</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">ApplicationPlugins</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Application</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> int</span><span style="color:#9CDCFE;"> ApplicationId</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> Name</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> ICollection</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">ApplicationPlugin</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">Plugins</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> ApplicationPlugin</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> int</span><span style="color:#9CDCFE;"> ApplicationPluginId</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> int</span><span style="color:#9CDCFE;"> ApplicationId</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> Application</span><span style="color:#9CDCFE;"> Application</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> TypeName</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">    private</span><span style="color:#4EC9B0;"> PluginHandler</span><span style="color:#DCDCAA;"> GetInstance</span><span style="color:#D4D4D4;">() =&gt; </span></span>
<span class="line"><span style="color:#D4D4D4;">        ((</span><span style="color:#4EC9B0;">PluginHandler</span><span style="color:#D4D4D4;">)</span><span style="color:#9CDCFE;">Activator</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">CreateInstance</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Type</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">GetType</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">TypeName</span><span style="color:#D4D4D4;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> PluginMetadata</span><span style="color:#9CDCFE;"> Metadata</span><span style="color:#D4D4D4;"> =&gt; </span><span style="color:#DCDCAA;">GetInstance</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">GetMetadata</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> PluginResult</span><span style="color:#DCDCAA;"> Invoke</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">string</span><span style="color:#9CDCFE;"> action</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">string</span><span style="color:#9CDCFE;"> data</span><span style="color:#D4D4D4;">) =&gt; </span><span style="color:#DCDCAA;">GetInstance</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">Invoke</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Application</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">action</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> abstract</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> PluginHandler</span><span style="color:#D4D4D4;"> { </span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> abstract</span><span style="color:#4EC9B0;"> PluginMetadata</span><span style="color:#DCDCAA;"> GetMetadata</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> abstract</span><span style="color:#4EC9B0;"> PluginResult</span><span style="color:#DCDCAA;"> Invoke</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Application</span><span style="color:#9CDCFE;"> app</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">string</span><span style="color:#9CDCFE;"> action</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">string</span><span style="color:#9CDCFE;"> data</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> abstract</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> PluginMetadata</span><span style="color:#D4D4D4;"> { </span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> bool</span><span style="color:#9CDCFE;"> Name</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> Version</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#4EC9B0;"> ICollection</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#569CD6;">string</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">Actions</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> abstract</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> PluginResult</span><span style="color:#D4D4D4;"> { </span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> bool</span><span style="color:#9CDCFE;"> Success</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#569CD6;"> string</span><span style="color:#9CDCFE;"> Message</span><span style="color:#D4D4D4;"> { </span><span style="color:#569CD6;">get</span><span style="color:#D4D4D4;">; </span><span style="color:#569CD6;">set</span><span style="color:#D4D4D4;">; }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><h2 id="loading-serialization" tabindex="-1">Loading &amp; Serialization <a class="header-anchor" href="#loading-serialization" aria-label="Permalink to &quot;Loading &amp; Serialization&quot;">​</a></h2><p>External types have slightly different behavior when undergoing serialization to be sent to the client. Unlike CRUD Models types which are subject to the rules of <a href="/Coalesce/concepts/include-tree.html">Include Tree</a>, external types ignore the Include Tree when being mapped to DTOs for serialization. Read <a href="/Coalesce/concepts/include-tree.html#external-type-caveats">External Type Caveats</a> for a more detailed explanation of this exception.</p>`,15),p=[o];function t(c,r,D,y,i,C){return n(),a("div",null,p)}const h=s(e,[["render",t]]);export{u as __pageData,h as default};
