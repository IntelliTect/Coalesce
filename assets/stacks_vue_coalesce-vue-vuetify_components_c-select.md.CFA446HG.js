import{_ as l,c as t,I as o,l as s,a7 as a,a as e,D as p,o as c}from"./chunks/framework.BkavzUpE.js";const W=JSON.parse('{"title":"c-select","description":"","frontmatter":{},"headers":[],"relativePath":"stacks/vue/coalesce-vue-vuetify/components/c-select.md","filePath":"stacks/vue/coalesce-vue-vuetify/components/c-select.md"}'),r={name:"stacks/vue/coalesce-vue-vuetify/components/c-select.md"},i=a(`<h1 id="c-select" tabindex="-1">c-select <a class="header-anchor" href="#c-select" aria-label="Permalink to &quot;c-select&quot;">​</a></h1><p>A dropdown component that allows for selecting values fetched from the generated <code>/list</code> API endpoints.</p><p>Used for selecting values for foreign key and navigation properties, or for selecting arbitrary objects or primary keys without a parent or owning object.</p><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><p>Binding to a navigation property or foreign key of a model:</p><div class="language-template"><button title="Copy Code" class="copy"></button><span class="lang">template</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#D4D4D4;"> :</span><span style="color:#9CDCFE;">model</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">person</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;company&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#6A9955;">  &lt;!-- OR: --&gt;</span></span>
<span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#D4D4D4;"> :</span><span style="color:#9CDCFE;">model</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">person</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;companyId&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span></code></pre></div><p>Binding an arbitrary primary key value or an arbitrary object:</p><div class="language-template"><button title="Copy Code" class="copy"></button><span class="lang">template</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#6A9955;">  &lt;!-- Binding a key: --&gt;</span></span>
<span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Person&quot;</span><span style="color:#9CDCFE;"> v-model</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">key-value</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">selectedPersonId</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">  &lt;!-- Binding an object: --&gt;</span></span>
<span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Person&quot;</span><span style="color:#9CDCFE;"> v-model</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">object-value</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">selectedPerson</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Person&quot;</span><span style="color:#9CDCFE;"> v-model</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">selectedPerson</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span></code></pre></div><p>Multi-select:</p><div class="language-template"><button title="Copy Code" class="copy"></button><span class="lang">template</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#6A9955;">  &lt;!-- Binding selected primary keys: --&gt;</span></span>
<span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Person&quot;</span><span style="color:#9CDCFE;"> multiple</span><span style="color:#9CDCFE;"> v-model</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">key-value</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">selectedPeopleIds</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">  &lt;!-- Binding selected objects: --&gt;</span></span>
<span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Person&quot;</span><span style="color:#9CDCFE;"> multiple</span><span style="color:#9CDCFE;"> v-model</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">selectedPeople</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#9CDCFE;"> for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Person&quot;</span><span style="color:#9CDCFE;"> multiple</span><span style="color:#9CDCFE;"> v-model</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">object-value</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">selectedPeople</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;"> /</span><span style="color:#808080;">&gt;</span></span></code></pre></div><p>Examples of other props:</p><div class="language-template"><button title="Copy Code" class="copy"></button><span class="lang">template</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">c-select</span><span style="color:#D4D4D4;"> </span></span>
<span class="line"><span style="color:#9CDCFE;">  for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Person&quot;</span><span style="color:#D4D4D4;"> </span></span>
<span class="line"><span style="color:#9CDCFE;">  v-model</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">selectedPerson</span><span style="color:#D4D4D4;">&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">  :</span><span style="color:#9CDCFE;">clearable</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">&quot;</span></span>
<span class="line"><span style="color:#9CDCFE;">  preselect-first</span></span>
<span class="line"><span style="color:#D4D4D4;">  :</span><span style="color:#9CDCFE;">params</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;">{ </span><span style="color:#9CDCFE;">pageSize:</span><span style="color:#B5CEA8;"> 42</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">filter:</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">isActive:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;"> } }</span><span style="color:#D4D4D4;">&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">  :</span><span style="color:#9CDCFE;">create</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;">createMethods</span><span style="color:#D4D4D4;">&quot;</span></span>
<span class="line"><span style="color:#9CDCFE;">  dense</span></span>
<span class="line"><span style="color:#9CDCFE;">  outlined</span></span>
<span class="line"><span style="color:#9CDCFE;">  color</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;pink&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">/</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#6A9955;">&lt;!-- \`createMethods\` is defined in the docs of \`create\` below --&gt;</span></span></code></pre></div><h2 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-label="Permalink to &quot;Props&quot;">​</a></h2><p>Note: In addition to the below props, <code>c-select</code> also supports most props that are supported by Vuetify&#39;s <a href="https://vuetifyjs.com/en/components/text-fields/" target="_blank" rel="noreferrer">v-text-field</a>.</p>`,14),D=s("p",null,"A metadata specifier for the value being bound. One of:",-1),d=s("ul",null,[s("li",null,[e("The name of a foreign key or reference navigation property belonging to "),s("code",null,"model"),e(".")]),s("li",null,"The name of a model type."),s("li",null,"A direct reference to a metadata object.")],-1),y=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,"When the binding can only locate a PK value and the corresponding object cannot be found (e.g. there is no navigation property, or the navigation property is null), c-select will automatically attempt to load the object from the server so it can be displayed in the UI.")],-1),u=s("p",null,[e("An object owning the value that was specified by the "),s("code",null,"for"),e(" prop. If provided, the input will be bound to the corresponding property on the "),s("code",null,"model"),e(" object.")],-1),h=s("p",null,[e("If "),s("code",null,"for"),e(" specifies a foreign key or reference navigation property, both the foreign key and the navigation property of the "),s("code",null,"model"),e(" will be updated when the selected value is changed.")],-1),C=s("p",null,[e("When binding the component with "),s("code",null,"v-model"),e(", accepts the "),s("code",null,"value"),e(" part of "),s("code",null,"v-model"),e(". If "),s("code",null,"for"),e(" was specified as a foreign key, this will expect a key; likewise, if "),s("code",null,"for"),e(" was specified as a type or as a navigation property, this will expect an object.")],-1),m=s("p",null,[e("Enables multi-select functionality. Bindings for "),s("code",null,"modelValue"),e(", "),s("code",null,"keyValue"),e(", and "),s("code",null,"objectValue"),e(" will accept and emit arrays instead of single values.")],-1),f=s("p",null,[e("When bound with "),s("code",null,'v-model:key-value="keyValue"'),e(", allows binding the primary key of the selected object explicitly. Binds an array when in multi-select mode.")],-1),g=s("p",null,[e("When bound with "),s("code",null,'v-model:object-value="objectValue"'),e(", allows binding the selected object explicitly. Binds an array when in multi-select mode.")],-1),b=s("p",null,[e("Whether the selection can be cleared or not, emitting "),s("code",null,"null"),e(" as the input value.")],-1),v=s("p",null,[e("If not specified and the component is bound to a foreign key or reference navigation property, defaults to whether or not the foreign key has a "),s("code",null,"required"),e(" validation rule defined in its "),s("a",{href:"/Coalesce/stacks/vue/layers/metadata.html"},"Metadata"),e(".")],-1),_=s("p",null,"If true, then when the first list results for the component are received by the client just after the component is created, c-select will emit the first item in the list as the selected value.",-1),E=s("p",null,"If true, then when the first list results for the component are received by the client just after the component is created, if the results contained exactly one item, c-select will emit that only item as the selected value.",-1),F=s("p",null,[e("If true, the list results will be reloaded when the dropdown menu is opened. By default, list results are loaded when the component is mounted and also when any of its parameters change (either search input or the "),s("code",null,"params"),e(" prop).")],-1),w=s("p",null,[e("An optional set of "),s("a",{href:"/Coalesce/modeling/model-components/data-sources.html#standard-parameters"},"Data Source Standard Parameters"),e(" to pass to API calls made to the server.")],-1),q=s("p",null,[e("If provided and non-false, enables "),s("a",{href:"/Coalesce/stacks/vue/layers/api-clients.html#response-caching"},"response caching"),e(" on the component's internal API callers.")],-1),k=s("p",null,"A object containing a pair of methods that allowing users to create new items from directly within the c-select if a matching object is not found.",-1),A=s("p",null,[e("The object must contain the following two methods. You should define these in your component's "),s("code",null,"script"),e(" section - don't try to define them inline in your component.")],-1),P={style:{"margin-left":"20px"}},I=s("p",null,"A function that will be called with the user's current search term, as well as the collection of currently loaded items being presented to the user as valid selection options.",-1),T=s("p",null,[e("It should return either a "),s("code",null,"string"),e(" that will be presented to the user as an option in the dropdown that can be clicked to invoke the "),s("code",null,"getItem"),e(" function below, or it should return "),s("code",null,"false"),e(" to prevent such an option from being shown to the user.")],-1),j=s("p",null,[e("A function that will be invoked when the user clicks the option in the dropdown list described by "),s("code",null,"getLabel"),e(". It will be given the user's current search term as well as the value of the label returned from "),s("code",null,"getLabel"),e(" as parameters. It must perform the necessary operations to create the new object on the server and then return a reference to that object.")],-1),x=a(`<p>For example:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#9CDCFE;">createMethods</span><span style="color:#D4D4D4;"> = {</span></span>
<span class="line"><span style="color:#DCDCAA;">  getLabel</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">search</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">items</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">Person</span><span style="color:#D4D4D4;">[]) {</span></span>
<span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> searchLower</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">search</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">toLowerCase</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">items</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">some</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">a</span><span style="color:#569CD6;"> =&gt;</span><span style="color:#9CDCFE;"> a</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">?.</span><span style="color:#DCDCAA;">toLowerCase</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">indexOf</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">searchLower</span><span style="color:#D4D4D4;">) == </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">)) {</span></span>
<span class="line"><span style="color:#C586C0;">      return</span><span style="color:#569CD6;"> false</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#C586C0;">    return</span><span style="color:#9CDCFE;"> search</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">  },</span></span>
<span class="line"><span style="color:#569CD6;">  async</span><span style="color:#DCDCAA;"> getItem</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">search</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">label</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> client</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> PersonApiClient</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#C586C0;">    return</span><span style="color:#D4D4D4;"> (</span><span style="color:#C586C0;">await</span><span style="color:#9CDCFE;"> client</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addPersonByName</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">label</span><span style="color:#D4D4D4;">)).</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">object</span><span style="color:#D4D4D4;">!;</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><h2 id="slots" tabindex="-1">Slots <a class="header-anchor" href="#slots" aria-label="Permalink to &quot;Slots&quot;">​</a></h2><p><code>#item=&quot;{ item: TModel, search: string }&quot;</code> - Slot used to customize the text of both items inside the list, as well as the text of selected items. By default, items are rendered with <a href="/Coalesce/stacks/vue/coalesce-vue-vuetify/components/c-display.html">c-display</a>. Slot is passed a parameter <code>item</code> containing a <a href="/Coalesce/stacks/vue/layers/models.html">model instance</a>, and <code>search</code> containing the current search query.</p><p><code>#list-item=&quot;{ item: TModel, search: string, selected: boolean }&quot;</code> - Slot used to customize the text of items inside the list. If not provided, falls back to the <code>item</code> slot. Contents are wrapped in a <code>v-list-item-title</code>.</p><p><code>#selected-item=&quot;{ item: TModel, search: string, index: number, remove: () =&gt; void }&quot;</code> - Slot used to customize the text of selected items. If not provided, falls back to the <code>item</code> slot. The <code>remove</code> function will deselect the item and is only valid when using multi-select.</p>`,6);function B(V,S,M,L,N,O){const n=p("Prop");return c(),t("div",null,[i,o(n,{def:"for: string | ForeignKeyProperty | ModelReferenceNavigationProperty | ModelType",lang:"ts"}),D,d,y,o(n,{def:"model?: Model",lang:"ts"}),u,h,o(n,{def:`value?: any // Vue 2
modelValue?: any // Vue 3`,lang:"ts"}),C,o(n,{def:"multiple?: boolean",lang:"ts"}),m,o(n,{def:`keyValue?: TKey
'onUpdate:keyValue': (value: TKey) => void`,lang:"ts"}),f,o(n,{def:`objectValue?: TModel
'onUpdate:objectValue': (value: TModel) => void`,lang:"ts"}),g,o(n,{def:"clearable?: boolean",lang:"ts"}),b,v,o(n,{def:"preselectFirst?: boolean = false",lang:"ts"}),_,o(n,{def:"preselectSingle?: boolean = false",lang:"ts"}),E,o(n,{def:"reloadOnOpen?: boolean = false",lang:"ts"}),F,o(n,{def:"params?: ListParameters",lang:"ts"}),w,o(n,{def:"cache?: ResponseCachingConfiguration | boolean",lang:"ts"}),q,o(n,{def:`create?: {
  getLabel: (search: string, items: TModel[]) => string | false,
  getItem: (search: string, label: string) => Promise<TModel>
}`,lang:"ts"}),k,A,s("div",P,[o(n,{def:"create.getLabel: (search: string, items: TModel[]) => string | false",lang:"ts",id:"member-create-getLabel"}),I,T,o(n,{def:"create.getItem: (search: string, label: string) => Promise<TModel>",lang:"ts",id:"member-create-getItem"}),j]),x])}const z=l(r,[["render",B]]);export{W as __pageData,z as default};
